<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>

	<!-- Basic Page Needs
  ================================================== -->
	<meta charset="utf-8">
	<title>Pi Player</title>
	<meta name="description" content="">
	<meta name="author" content="Andrew Niemantsverdriet">

	<!-- Mobile Specific Metas
  ================================================== -->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<!-- CSS
  ================================================== -->
	<link rel="stylesheet" href="stylesheets/base.css">
	<link rel="stylesheet" href="stylesheets/skeleton.css">
	<link rel="stylesheet" href="stylesheets/layout.css">

	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Favicons
	================================================== -->
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">

	<!-- Web Sockets
	================================================== -->
  <script>
    "use strict";
    // Initialize everything when the window finishes loading
    window.addEventListener("load", function(event) {
      var status = document.getElementById("status");
      var url = document.getElementById("url");
      var open = document.getElementById("open");
      var close = document.getElementById("close");
      var messages = document.getElementById("messages");
      // Control Buttons
      var p = document.getElementById("p");
      var back = document.getElementById("back");
      var skip = document.getElementById("skip");
      var slow = document.getElementById("slow");
      var fast = document.getElementById("fast");
      var abort = document.getElementById("abort");
      var socket;

      status.textContent = "Not Connected";
      url.value = "ws://localhost:8080";
      close.disabled = true;
      //TODO disable control panel if not coneected controls.disabled = true;

      // Create a new connection when the Connect button is clicked
      open.addEventListener("click", function(event) {
        open.disabled = true;
        messages.value = "";
        socket = new WebSocket(url.value, "echo-protocol");

        socket.addEventListener("open", function(event) {
          close.disabled = false;
          //TODO enable control panel once connected controls.disabled = false;
          status.textContent = "Connected";
        });

        // Display messages received from the server
        socket.addEventListener("message", function(event) {
          messages.value += "Server Says: " + event.data + "\n";
          messages.scrollTop = messages.scrollHeight;
        });

        // Display any errors that occur
        socket.addEventListener("error", function(event) {
          messages.value += "Error: " + event + "\n";
          messages.scrollTop = messages.scrollHeight;
        });

        socket.addEventListener("close", function(event) {
          open.disabled = false;
          status.textContent = "Not Connected";
        });
      });

      // Close the connection when the Disconnect button is clicked
      close.addEventListener("click", function(event) {
        close.disabled = true;
        // TODO controls.disabled = true;
        // TODO prompt to save file? messages.value = "";
        socket.close();
      });

      // Buttons to send\
      p.addEventListener("click", function(event) {
        socket.send('p');
      });

	  back.addEventListener("click", function(event) {
        socket.send('\x1B\x5B\x44');
      });

      skip.addEventListener("click", function(event) {
        socket.send('\x1B\x5B\x43');
      });

      slow.addEventListener("click", function(event) {
        socket.send('2');
      });

      fast.addEventListener("click", function(event) {
        socket.send('1');
      });

      abort.addEventListener("click", function(event) {
        socket.send('q');
      });

    });
  </script>
</head>
<body>



	<!-- Primary Page Layout
	================================================== -->

	<!-- Delete everything in this .container and get started on your own site! -->

	<div class="container">
		<div class="three columns sidebar">
			<nav>
				<h3 id="logo">Playlist</h3>
				<select multiple="multiple" size="25" name="items">
					<option value="item1">Item 1</option>
					<option value="item2">Item 2</option>
					<option value="item3">Item 3</option>
					<option value="item4">Item 4</option>
					<option value="item5">Item 5</option>
					<option value="item6">Item 6</option>
					<option value="item7">Item 7</option>
					<option value="item8">Item 8</option>
					<option value="item9">Item 9</option>
					<option value="item10">Item 10</option>
					<option value="item11">Item 11</option>
					<option value="item12">Item 12</option>
					<option value="item13">Item 13</option>
					<option value="item14">Item 14</option>
					<option value="item15">Item 15</option>
					<option value="item16">Item 16</option>
					<option value="item17">Item 17</option>
					<option value="item18">Item 18</option>
					<option value="item19">Item 19</option>
					<option value="item20">Item 20</option>
					<option value="item21">Item 21</option>
					<option value="item22">Item 22</option>
					<option value="item23">Item 23</option>
					<option value="item24">Item 24</option>
					<option value="item25">Item 25</option>
					<option value="item26">Item 26</option>
					<option value="item27">Item 27</option>
					<option value="item28">Item 28</option>
					<option value="item29">Item 29</option>
					<option value="item30">Item 30</option>
					<option value="item31">Item 31</option>
					<option value="item32">Item 32</option>
					<option value="item33">Item 33</option>
					<option value="item34">Item 34</option>
					<option value="item35">Item 35</option>
					<option value="item36">Item 36</option>
					<option value="item37">Item 37</option>
					<option value="item38">Item 38</option>
					<option value="item39">Item 39</option>
					<option value="item40">Item 40</option>
					<option value="item41">Item 41</option>
					<option value="item42">Item 42</option>
					<option value="item43">Item 43</option>
					<option value="item44">Item 44</option>
					<option value="item45">Item 45</option>
					<option value="item46">Item 46</option>
					<option value="item47">Item 47</option>
					<option value="item48">Item 48</option>
					<option value="item49">Item 49</option>
					<option value="item50">Item 50</option>
					<option value="item51">Item 51</option>
					<option value="item52">Item 52</option>
					<option value="item53">Item 53</option>
					<option value="item54">Item 54</option>
					<option value="item55">Item 55</option>
					<option value="item56">Item 56</option>
					<option value="item57">Item 57</option>
					<option value="item58">Item 58</option>
					<option value="item59">Item 59</option>
					<option value="item60">Item 60</option>
					<option value="item61">Item 61</option>
					<option value="item62">Item 62</option>
					<option value="item63">Item 63</option>
					<option value="item64">Item 64</option>
				</select>
				<input id="golive" type="button" value="Play Selected Items" />
			</nav>
			&nbsp;
		</div>
		<div class="thirteen columns">
			<h1 class="remove-bottom" style="margin-top: 40px">Pi Player</h1>
			<h5>Status: <span id="status"></span></h5>
			<p>
				URL: <input id="url" />
				<input id="open" type="button" value="Connect" />&nbsp;
				<input id="close" type="button" value="Disconnect" />
			</p>
			<hr />
		</div>
		<div class="five columns clearfix">
			<h3>Controls</h3>
			<input id="p" class="four columns" type="button" value="Play/Pause" />

			<input id="back" class="two columns" type="button" value="Replay" />
			<input id="skip" class="two columns" type="button" value="Skip" />

			<input id="slow" class="two columns" type="button" value="Slow" />
			<input id="fast" class="two columns" type="button" value="Fast" />

			<input id="abort" class="four columns" type="button" value="Abort" />
		</div>
		<div class="eight columns">
			<h3>Log</h3>
			<textarea class="seven columns" id="messages" rows="10"></textarea>
		</div>

	</div><!-- container -->


<!-- End Document
================================================== -->
</body>
</html>
